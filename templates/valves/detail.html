{% extends "base.html" %}

{% block title %}{{ valve.位号 }} - 台账详情{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>{{ valve.位号 }} - {{ valve.名称 }}</h2>
    <div>
        {% if valve.created_by == current_user.id or current_user.role in ['leader', 'admin'] %}
        <a href="{{ url_for('valves.edit', id=valve.id) }}" class="btn btn-primary">编辑</a>
        {% endif %}
        <a href="{{ url_for('valves.list') }}" class="btn btn-secondary">返回</a>
    </div>
</div>

<div class="mb-3">
    {% if valve.status == 'approved' %}
    <span class="badge bg-success">已审批</span>
    {% elif valve.status == 'pending' %}
    <span class="badge bg-warning">待审批</span>
    {% elif valve.status == 'rejected' %}
    <span class="badge bg-danger">已驳回</span>
    {% else %}
    <span class="badge bg-secondary">草稿</span>
    {% endif %}
</div>

<div class="card mb-3">
    <div class="card-header">基础信息</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-4"><strong>序号:</strong> {{ valve.序号 }}</div>
            <div class="col-md-4"><strong>位号:</strong> {{ valve.位号 }}</div>
            <div class="col-md-4"><strong>名称:</strong> {{ valve.名称 }}</div>
            <div class="col-md-4"><strong>装置名称:</strong> {{ valve.装置名称 }}</div>
            <div class="col-md-4"><strong>设备等级:</strong> {{ valve.设备等级 }}</div>
            <div class="col-md-4"><strong>型号规格:</strong> {{ valve.型号规格 }}</div>
            <div class="col-md-4"><strong>生产厂家:</strong> {{ valve.生产厂家 }}</div>
            <div class="col-md-4"><strong>安装位置:</strong> {{ valve.安装位置及用途 }}</div>
            <div class="col-md-4"><strong>设备编号:</strong> {{ valve.设备编号 }}</div>
            <div class="col-md-4"><strong>是否联锁:</strong> {{ valve.是否联锁 }}</div>
        </div>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header">工艺条件</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-3"><strong>介质名称:</strong> {{ valve.工艺条件_介质名称 }}</div>
            <div class="col-md-3"><strong>设计温度:</strong> {{ valve.工艺条件_设计温度 }}</div>
            <div class="col-md-3"><strong>阀前压力:</strong> {{ valve.工艺条件_阀前压力 }}</div>
            <div class="col-md-3"><strong>阀后压力:</strong> {{ valve.工艺条件_阀后压力 }}</div>
        </div>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header">阀体信息</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-4"><strong>公称通径:</strong> {{ valve.阀体_公称通径 }}</div>
            <div class="col-md-4"><strong>连接方式:</strong> {{ valve.阀体_连接方式及规格 }}</div>
            <div class="col-md-4"><strong>材质:</strong> {{ valve.阀体_材质 }}</div>
        </div>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header">阀内件信息</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-4"><strong>阀座直径:</strong> {{ valve.阀内件_阀座直径 }}</div>
            <div class="col-md-4"><strong>阀芯材质:</strong> {{ valve.阀内件_阀芯材质 }}</div>
            <div class="col-md-4"><strong>阀座材质:</strong> {{ valve.阀内件_阀座材质 }}</div>
            <div class="col-md-4"><strong>阀杆材质:</strong> {{ valve.阀内件_阀杆材质 }}</div>
            <div class="col-md-4"><strong>流量特性:</strong> {{ valve.阀内件_流量特性 }}</div>
            <div class="col-md-4"><strong>泄露等级:</strong> {{ valve.阀内件_泄露等级 }}</div>
            <div class="col-md-4"><strong>Cv值:</strong> {{ valve.阀内件_Cv值 }}</div>
        </div>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header">执行机构信息</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-4"><strong>形式:</strong> {{ valve.执行机构_形式 }}</div>
            <div class="col-md-4"><strong>型号规格:</strong> {{ valve.执行机构_型号规格 }}</div>
            <div class="col-md-4"><strong>厂家:</strong> {{ valve.执行机构_厂家 }}</div>
            <div class="col-md-4"><strong>作用形式:</strong> {{ valve.执行机构_作用形式 }}</div>
            <div class="col-md-4"><strong>行程:</strong> {{ valve.执行机构_行程 }}</div>
            <div class="col-md-4"><strong>弹簧范围:</strong> {{ valve.执行机构_弹簧范围 }}</div>
            <div class="col-md-4"><strong>气源压力:</strong> {{ valve.执行机构_气源压力 }}</div>
            <div class="col-md-4"><strong>故障位置:</strong> {{ valve.执行机构_故障位置 }}</div>
            <div class="col-md-4"><strong>关阀时间:</strong> {{ valve.执行机构_关阀时间 }}</div>
            <div class="col-md-4"><strong>开阀时间:</strong> {{ valve.执行机构_开阀时间 }}</div>
        </div>
    </div>
</div>

{% if valve.备注 %}
<div class="card mb-3">
    <div class="card-header">备注</div>
    <div class="card-body">
        {{ valve.备注 }}
    </div>
</div>
{% endif %}
{% endblock %}
