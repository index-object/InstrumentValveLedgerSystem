{% extends "base.html" %}

{% block page_title %}维护记录列表{% endblock %}

{% block header_actions %}
<form method="get" class="d-flex gap-2">
    <div class="search-box">
        <i class="bi bi-search"></i>
        <input type="text" name="search" class="form-control form-control-modern" placeholder="搜索检修内容..." value="{{ request.args.get('search', '') }}">
    </div>
    <button type="submit" class="btn btn-primary-custom"><i class="bi bi-search"></i></button>
</form>
{% endblock %}

{% block content %}
<div class="modern-card">
    <div class="table-responsive">
        <table class="modern-table">
            <thead>
                <tr>
                    <th>设备位号</th>
                    <th>设备名称</th>
                    <th>所属中心</th>
                    <th>检修时间</th>
                    <th>检修人员</th>
                    <th>检修内容</th>
                </tr>
            </thead>
            <tbody>
                {% for record in records %}
                <tr>
                    <td><a href="{{ url_for('valves.detail', id=record.valve_id) }}" style="color: var(--primary-color); font-weight: 500;">{{ record.设备位号 or '-' }}</a></td>
                    <td>{{ record.设备名称 or '-' }}</td>
                    <td>{{ record.所属中心 or '-' }}</td>
                    <td>{{ record.检修时间.strftime('%Y-%m-%d %H:%M') if record.检修时间 else '-' }}</td>
                    <td>{{ record.检修人员 or '-' }}</td>
                    <td>{{ record.检修内容[:15] if record.检修内容 else '-' }}{% if record.检修内容 and record.检修内容|length > 15 %}...{% endif %}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6">
                        <div class="empty-state">
                            <i class="bi bi-wrench"></i>
                            <p>暂无维护记录</p>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
