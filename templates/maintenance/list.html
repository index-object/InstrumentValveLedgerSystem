{% extends "base.html" %}

{% block page_title %}维护记录列表{% endblock %}

{% block header_actions %}
<form method="get" class="d-flex gap-2">
    <div class="search-box">
        <i class="bi bi-search"></i>
        <input type="text" name="search" class="form-control form-control-modern" placeholder="搜索检修内容..." value="{{ request.args.get('search', '') }}">
    </div>
    <button type="submit" class="btn btn-primary-custom"><i class="bi bi-search"></i></button>
</form>
{% endblock %}

{% block content %}
<div class="modern-card">
    <div class="table-responsive">
        <table class="modern-table">
            <thead>
                <tr>
                    <th>设备位号</th>
                    <th>设备名称</th>
                    <th>类型</th>
                    <th>日期</th>
                    <th>负责人</th>
                    <th>内容</th>
                </tr>
            </thead>
            <tbody>
                {% for record in records %}
                <tr>
                    <td><a href="{{ url_for('valves.detail', id=record.valve_id) }}" style="color: var(--primary-color); font-weight: 500;">{{ record.设备位号 }}</a></td>
                    <td>{{ record.设备名称 }}</td>
                    <td>{{ record.类型 }}</td>
                    <td>{{ record.日期.strftime('%Y-%m-%d') }}</td>
                    <td>{{ record.负责人 }}</td>
                    <td>{{ record.内容[:50] }}{% if record.内容 and record.内容|length > 50 %}...{% endif %}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6">
                        <div class="empty-state">
                            <i class="bi bi-wrench"></i>
                            <p>暂无维护记录</p>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
