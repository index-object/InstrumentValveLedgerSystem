# 批量操作功能设计

## 概述

为 my-ledgers 界面添加批量操作功能，支持批量提交审批和批量删除合集。

## UI 设计

### 1. 复选框选择

- 表格每行左侧添加复选框（用于选择合集）
- 表头添加"全选"复选框
- 复选框列宽度: 5%

### 2. 批量操作工具栏

- 位置: 表格上方，选中任意合集时显示
- 按钮:
  - "批量提交审批" - 提交选中合集中的草稿内容
  - "批量删除" - 删除选中的合集（删除前弹窗确认）

### 3. 删除确认弹窗

- 使用浏览器原生 confirm 对话框
- 提示内容: "确定要删除选中的 X 个合集吗？此操作不可恢复！"

## 后端 API

### 1. 批量删除

**路由**: `POST /ledgers/batch-delete`

**请求参数**:
- `ledger_ids`: 合集 ID 列表

**权限检查**:
- 合集创建者或 leader/admin 角色

**业务逻辑**:
- 检查是否有待审批记录，如有则阻止删除
- 删除合集及其所有台账内容
- 返回成功/失败消息

### 2. 批量提交审批

**路由**: `POST /ledgers/batch-submit`

**请求参数**:
- `ledger_ids`: 合集 ID 列表

**权限检查**:
- 合集创建者或 leader/admin 角色

**业务逻辑**:
- 只提交含有草稿内容的合集
- 将草稿状态改为待审批
- 创建审批日志

## 实现文件

1. `app/routes/ledgers.py` - 添加批量操作 API
2. `templates/valves/my_ledgers.html` - 添加复选框和批量操作 UI
3. `static/js/ledgers-list.js` - 添加前端逻辑
